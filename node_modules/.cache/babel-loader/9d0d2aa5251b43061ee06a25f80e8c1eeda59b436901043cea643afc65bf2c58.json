{"ast":null,"code":"import React from'react';import{useNavigate}from'react-router-dom';import'../../styles/tickets/MyTickets.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const MyTickets=_ref=>{let{tickets,currentUser}=_ref;const navigate=useNavigate();// Filter tickets based on user role\nconst filteredTickets=tickets.filter(ticket=>{if(!ticket)return false;if(currentUser.role==='ADMIN')return true;if(currentUser.role==='APPROVER'){return ticket.status==='PENDING'||ticket.requesterId===currentUser.id;}return ticket.requesterId===currentUser.id;});const formatDate=dateString=>{if(!dateString)return'N/A';try{return new Date(dateString).toLocaleDateString('en-US',{year:'numeric',month:'short',day:'numeric',hour:'2-digit',minute:'2-digit'});}catch(error){return'Invalid Date';}};const getStatusClass=status=>{switch(status){case'APPROVED':return'status-approved';case'REJECTED':return'status-rejected';case'PENDING':return'status-pending';default:return'status-draft';}};const formatId=id=>{if(!id)return'N/A';return id.length>6?id.slice(-6).toUpperCase():id.toUpperCase();};const handleRowClick=ticketId=>{if(ticketId){navigate(`/tickets/${ticketId}`);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"my-tickets\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"My Tickets\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"tickets-table-container\",children:[/*#__PURE__*/_jsxs(\"table\",{className:\"tickets-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Title\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Department\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Request Date\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Machine\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:filteredTickets.map(ticket=>{var _ticket$chemicalConfi;return/*#__PURE__*/_jsxs(\"tr\",{onClick:()=>ticket.id&&handleRowClick(ticket.id),className:\"ticket-row\",children:[/*#__PURE__*/_jsx(\"td\",{children:formatId(ticket.id)}),/*#__PURE__*/_jsx(\"td\",{children:ticket.title||'N/A'}),/*#__PURE__*/_jsx(\"td\",{children:ticket.department||'N/A'}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{className:`status-badge ${getStatusClass(ticket.status)}`,children:ticket.status||'DRAFT'})}),/*#__PURE__*/_jsx(\"td\",{children:formatDate(ticket.requestDate)}),/*#__PURE__*/_jsx(\"td\",{children:((_ticket$chemicalConfi=ticket.chemicalConfig)===null||_ticket$chemicalConfi===void 0?void 0:_ticket$chemicalConfi.machineName)||'N/A'})]},ticket.id||Math.random().toString());})})]}),filteredTickets.length===0&&/*#__PURE__*/_jsx(\"div\",{className:\"no-tickets\",children:/*#__PURE__*/_jsx(\"p\",{children:\"No tickets found\"})})]})]});};export default MyTickets;","map":{"version":3,"names":["React","useNavigate","jsx","_jsx","jsxs","_jsxs","MyTickets","_ref","tickets","currentUser","navigate","filteredTickets","filter","ticket","role","status","requesterId","id","formatDate","dateString","Date","toLocaleDateString","year","month","day","hour","minute","error","getStatusClass","formatId","length","slice","toUpperCase","handleRowClick","ticketId","className","children","map","_ticket$chemicalConfi","onClick","title","department","requestDate","chemicalConfig","machineName","Math","random","toString"],"sources":["/Users/a667227/Desktop/Work/ticket-management/src/components/tickets/MyTickets.tsx"],"sourcesContent":["import React from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { Ticket, User } from '../../types/system';\nimport '../../styles/tickets/MyTickets.css';\n\ninterface MyTicketsProps {\n  tickets: Ticket[];\n  currentUser: User;\n}\n\nconst MyTickets: React.FC<MyTicketsProps> = ({ tickets, currentUser }) => {\n  const navigate = useNavigate();\n  \n  // Filter tickets based on user role\n  const filteredTickets = tickets.filter(ticket => {\n    if (!ticket) return false;\n    if (currentUser.role === 'ADMIN') return true;\n    if (currentUser.role === 'APPROVER') {\n      return ticket.status === 'PENDING' || ticket.requesterId === currentUser.id;\n    }\n    return ticket.requesterId === currentUser.id;\n  });\n\n  const formatDate = (dateString: string | undefined) => {\n    if (!dateString) return 'N/A';\n    try {\n      return new Date(dateString).toLocaleDateString('en-US', {\n        year: 'numeric',\n        month: 'short',\n        day: 'numeric',\n        hour: '2-digit',\n        minute: '2-digit'\n      });\n    } catch (error) {\n      return 'Invalid Date';\n    }\n  };\n\n  const getStatusClass = (status: string | undefined) => {\n    switch (status) {\n      case 'APPROVED': return 'status-approved';\n      case 'REJECTED': return 'status-rejected';\n      case 'PENDING': return 'status-pending';\n      default: return 'status-draft';\n    }\n  };\n\n  const formatId = (id: string | undefined) => {\n    if (!id) return 'N/A';\n    return id.length > 6 ? id.slice(-6).toUpperCase() : id.toUpperCase();\n  };\n\n  const handleRowClick = (ticketId: string) => {\n    if (ticketId) {\n      navigate(`/tickets/${ticketId}`);\n    }\n  };\n\n  return (\n    <div className=\"my-tickets\">\n      <h2>My Tickets</h2>\n      <div className=\"tickets-table-container\">\n        <table className=\"tickets-table\">\n          <thead>\n            <tr>\n              <th>ID</th>\n              <th>Title</th>\n              <th>Department</th>\n              <th>Status</th>\n              <th>Request Date</th>\n              <th>Machine</th>\n            </tr>\n          </thead>\n          <tbody>\n            {filteredTickets.map(ticket => (\n              <tr \n                key={ticket.id || Math.random().toString()}\n                onClick={() => ticket.id && handleRowClick(ticket.id)}\n                className=\"ticket-row\"\n              >\n                <td>{formatId(ticket.id)}</td>\n                <td>{ticket.title || 'N/A'}</td>\n                <td>{ticket.department || 'N/A'}</td>\n                <td>\n                  <span className={`status-badge ${getStatusClass(ticket.status)}`}>\n                    {ticket.status || 'DRAFT'}\n                  </span>\n                </td>\n                <td>{formatDate(ticket.requestDate)}</td>\n                <td>{ticket.chemicalConfig?.machineName || 'N/A'}</td>\n              </tr>\n            ))}\n          </tbody>\n        </table>\n        {filteredTickets.length === 0 && (\n          <div className=\"no-tickets\">\n            <p>No tickets found</p>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default MyTickets; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}